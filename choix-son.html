<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Choix du son</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <video id="background-video" autoplay loop muted poster="https://www.shutterstock.com/shutterstock/videos/3617496381/preview/stock-footage-animated-butterfly-isolated-on-black-background.webm">
  <source src="https://www.shutterstock.com/shutterstock/videos/3617496381/preview/stock-footage-animated-butterfly-isolated-on-black-background.mp4" type="video/mp4">
</video>
  <header>
    <h1>Sélectionnez un son ou une voix</h1>
  </header>
  <main>
    <select id="audio-choice">
      <option value="">-- Choisir un son --</option>
      <option value="sounds/ANMLInsc_Cigales (ID 3002)_LS.mp3">Cigales</option>
      <option value="sounds/AMBBird_Oiseaux du soir (ID 1859)_LS.mp3">Oiseaux du soir</option>
      <option value="sounds/AMBUndr_Grotte 2 (ID 2136)_LS.mp3">Grotte</option>
      <option value="voices/female1.mp3">Voix féminine 1</option>
      <option value="voices/male1.mp3">Voix masculine 1</option>
    </select>
    <button onclick="startZenBreak()">ZenBreak</button>
    <div id="countdown-display" style="font-size: 2em; margin-top: 20px;"></div>

  </main>
  <script>
    

    function startZenBreak() {
      const audioChoice = document.getElementById('audio-choice').value;
      if (!audioChoice) {
        alert("Veuillez choisir un son ou une voix pour commencer.");
        return;
      }

      const audio = new Audio(audioChoice);
      audio.play().catch(err => {
        console.log("Lecture bloquée par le navigateur :", err);
        alert("Veuillez cliquer de nouveau sur le bouton pour lancer la lecture.");
      });

      let duration = parseInt(localStorage.getItem('selectedDuration') || '5') * 60;
      const display = document.getElementById('countdown-display');
      display.style.display = 'block';
      const timer = setInterval(() => {
        const minutes = Math.floor(duration / 60);
        const seconds = duration % 60;
        display.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

        if (duration <= 0) {
          clearInterval(timer);
          const endAudio = new Audio('music/zen_music.mp3');
          endAudio.play();
          display.textContent = "Fin de la séance zen ✨";
        }

        duration--;
      }, 1000);
    }

   

  </script>
</body>
</html>
